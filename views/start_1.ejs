<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RUNUS - 시작 화면</title>
  <link rel="stylesheet" href="/css/style.css">
  
  <!-- 카카오맵 API 추가 -->
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=4f8b765027d36d5b212c070eeeb79a62&libraries=services"></script>

  <!-- 위치 정보 스크립트 추가 -->
  <script>
    function getLocation() {
      // 사용자의 위치 정보 가져오기
      if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(success, error);
      } else {
          alert("Geolocation is not supported by this browser.");
      }
    }

    // 위치 정보를 성공적으로 받았을 경우
    function success(position) {
      const latitude = position.coords.latitude;
      const longitude = position.coords.longitude;
      
      // 카카오맵의 Geocoder 서비스 객체 생성
      const geocoder = new kakao.maps.services.Geocoder();
      const coord = new kakao.maps.LatLng(latitude, longitude);

      // 위도, 경도 좌표를 주소로 변환
      geocoder.coord2Address(coord.getLng(), coord.getLat(), (result, status) => {
        if (status === kakao.maps.services.Status.OK) {
            let address = result[0].address.address_name;
            
            // 주소에서 숫자와 하이픈 제거하는 부분
            address = address.replace(/[0-9-]/g, '').trim(); // 숫자와 하이픈 제거
            document.getElementById("addressInput").value = address;  // 필드에 값 넣기
        } else {
            alert("주소를 찾을 수 없습니다.");
        }
      });
    }

    // 위치 정보 가져오기 실패 시
    function error() {
      alert("사용자의 위치를 가져올 수 없습니다.");
    }
  </script>
</head>
<body>
<div style="width: 100%; height: 100%; background-color: #F1FCFA;">
    <header>
        <div class="startpage_mainlogo">RUNUS</div>
    </header>
    <nav>
        <div class="startpage_nav">
            <div style="color: #274A4A; background-color: #A4E3D8;">1</div>
            <div>2</div>
            <div>3</div>
        </div>
    </nav>
    <section>
        <article>
            <div class="startpage_content">
                <div style="font-weight: 800; font-size: 24px; color: #5B5B5B;">만나서 반가워요!</div>
                <div>기본 정보를 입력해 주세요.</div>
            </div>
        </article>
        <article>
            <div class="startpage_set">
                <div class="startpage_inforset">
                    <div class="startpage_infor">이름</div>
                    <input class="startpage_myinfor" type="text" placeholder="이름 입력하기">
                </div>
                <div class="startpage_inforset">
                    <div class="startpage_infor">생년월일</div>
                    <input class="startpage_myinfor" type="text" placeholder="xxxx.xx.xx">
                </div>
                <div class="startpage_inforset">
                    <div class="startpage_infor">전화번호</div>
                    <input class="startpage_myinfor" type="text" placeholder="xxx-xxxx-xxxx">
                </div>
                <div class="startpage_inforset">
                    <div class="startpage_infor">거주지</div>
                    <!-- 주소를 자동으로 채워넣는 필드 -->
                    <input 
                        id="addressInput" 
                        class="startpage_myinfor" 
                        type="text" 
                        placeholder="주소 검색하기" 
                        onclick="getLocation()"
                        readonly>
                </div>                
            </div>
        </article>
    </section>
    <footer>
        <div style="cursor: default;" onclick="location.href='/start/2';" class="startpage_next">></div>
    </footer>
</div>
</body>
</html>
